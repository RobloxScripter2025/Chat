<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Panel</title>
<style>
body { font-family: 'Poppins', sans-serif; background:#111; color:white; padding:20px;}
table { width:100%; border-collapse: collapse;}
th, td { border:1px solid purple; padding:10px; text-align:left;}
button { background: purple; color:white; border:none; padding:5px 10px; border-radius:5px; cursor:pointer;}
</style>
</head>
<body>
<h1>ðŸš¨ Admin Panel</h1>
<table>
<tr><th>Username</th><th>Cookie</th><th>Reason</th><th>Action</th></tr>
</table>

<script>
async function loadBans() {
  const res = await fetch("/bans.json");
  const bans = await res.json();
  const table = document.querySelector("table");
  // Remove old rows
  table.querySelectorAll("tr:not(:first-child)").forEach(r => r.remove());

  bans.forEach((b,i)=>{
    const row = table.insertRow();
    row.innerHTML = `<td>${b.username}</td><td>${b.cookie}</td><td>${b.reason}</td>
      <td><button onclick="unban(${i})">Unban</button></td>`;
  });
}

async function unban(index){
  const password = prompt("Enter admin password");
  const res = await fetch(`/unban/${index}`, {
    method:"POST",
    headers: { "Content-Type":"application/json" },
    body: JSON.stringify({ password })
  });
  if(res.ok){
    alert("Unbanned!");
    loadBans();
  } else {
    alert("Wrong password or error");
  }
}

loadBans();
</script>
</body>
</html>
